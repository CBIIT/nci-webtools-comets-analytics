<nav class="navbar navbar-default">
    <div class="container-fluid">
        <div class="collapse navbar-collapse" id="comets-tab-nav">
            <ul class="nav nav-pills">
                <li role="presentation" class="active"><a href="#tab-home" data-toggle="tab">Home</a></li>
                <li role="presentation"><a href="#tab-qualityControl" data-toggle="tab" id="controlTabId" data-toggle="tab">Quality Control Check</a></li>
                <li role="presentation"><a href="#tab-harmonization" data-toggle="tab" id="harmonizationTabId" data-toggle="tab">Harmonization Check</a></li>
                <li role="presentation"><a href="#tab-correlate" data-toggle="tab" id="correlateTabId" data-toggle="tab">Correlate</a></li>
                <li role="presentation"><a href="#tab-help" data-toggle="tab" id="helpTabId" data-toggle="tab">Help</a></li>
                <li class="pull-right">
                    <input type="button" class="btn btn-primary" id="logoutBtn" value="Logout" />
                </li>
            </ul>
        </div>
    </div>
</nav>

<div class="tab-content grey-border">
    <div class="tab-pane active" id="tab-home">
        <h3 id='page-head'><%= user %>, Welcome to the COMETS (COnsortium of METabolomics Studies) Analytics</h3>
        <br/>
        <br/>
        <p>The COMETS team developed this application that will support all cohort-specific analyses of the COMETS consortium. Data are not saved in the system but the output must be downloaded and submitted for meta-analyses. Alternatively, cohorts can choose to run their analyses locally using the COMETS package.</p>
        <br/> This web application contains three functions:
        <br/>
        <ul>
            <li>Quality Control Check: internal functionality to check and get some stats from the master harmonized file generated by Adam</li>
            <li>Harmonization Check: allows consortium members to check whether their list of metabolites has already been integrated and harmonized into the master harmonized file.</li>
            <li>Correlate: A series of models will be run on each cohort in support of the age paper. The analyses will result in metabolites (OUTCOMES) displayed in rows and the covariates (EXPOSURES) along columns.</li>
        </ul>
    </div>
    <!-- start quality Control Tab -->
    <div class="tab-pane" id="tab-qualityControl">
        <div class="row">
            <div class="col-md-4">
                <div class="well">
                    <div class="well well-nested">
                        <form name="qualityControlForm">
                            <div class="row">
                                <div class="col-xs-12"> &nbsp;</div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12">
                                    <label for="harmonizationFile">Input Harmonizated Data File (.csv format)</label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12">
                                    <input id="harmonizationFile" type="file" accept=".csv">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12"> &nbsp;</div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12">
                                    <label for="mappingFile">Input Refmet Mapping File (e.g. at least 3 columns: UIDs, Biochemical name and Refmet columns) </label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12">
                                    <input id="mappingFile" type="file">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12"> &nbsp;</div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12"> &nbsp;</div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12"> &nbsp;</div>
                            </div>
                        </form>
                    </div>
                </div>
                <!-- end of well -->
            </div>
            <div class="col-md-8">
                <div class="col-sx-12" id="qualityControlResult" style="display:none;">
                    <div class="row">
                        <div class="col-xs-12">
                            <b>Stats on Input Files</b>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-12">
                            <table width="50%" border="1">
                                <tbody>
                                    <tr>
                                        <th width="10%">&nbsp;</th>
                                        <th width="30%">Files</th>
                                        <th width="30%">NumRows</th>
                                        <th width="30%">NCols</th>
                                    </tr>
                                    <tr>
                                        <td>1</td>
                                        <td>Uids</td>
                                        <td>3148</td>
                                        <td>25</td>
                                    </tr>
                                    <tr>
                                        <td>2</td>
                                        <td>Refmet</td>
                                        <td>3148</td>
                                        <td>5</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-12">&nbsp;</div>
                    </div>
                    <div class="row">
                        <div class="col-xs-12">
                            <b>Stats on metabolities in harmonized data file (uids)</b>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-12">
                            <table width="100%" border="1">
                                <tbody>
                                    <tr>
                                        <th width="10%">&nbsp;</th>
                                        <th width="50%">Type</th>
                                        <th width="40%">Number_metabolities</th>
                                    </tr>
                                    <tr>
                                        <td>1</td>
                                        <td>Total</td>
                                        <td>3148</td>
                                    </tr>
                                    <tr>
                                        <td>2</td>
                                        <td>With identified biochemical name</td>
                                        <td>1704</td>
                                    </tr>
                                    <tr>
                                        <td>3</td>
                                        <td>W/O identified biochemical name</td>
                                        <td>1444</td>
                                    </tr>
                                    <tr>
                                        <td>4</td>
                                        <td>With NCI_Name</td>
                                        <td>2588</td>
                                    </tr>
                                    <tr>
                                        <td>5</td>
                                        <td>With BROAD_Name</td>
                                        <td>350</td>
                                    </tr>
                                    <tr>
                                        <td>6</td>
                                        <td>With FENLAND_METABOLON_NAME</td>
                                        <td>943</td>
                                    </tr>
                                    <tr>
                                        <td>7</td>
                                        <td>With FENLAND_BIOCRATES_NAME</td>
                                        <td>188</td>
                                    </tr>
                                    <tr>
                                        <td>8</td>
                                        <td>With ARIC_NAME 1</td>
                                        <td>601</td>
                                    </tr>
                                    <tr>
                                        <td>9</td>
                                        <td>With ARIC_NAME 2</td>
                                        <td>1161</td>
                                    </tr>
                                    <tr>
                                        <td>10</td>
                                        <td>With UCLEB_NMR_NAME</td>
                                        <td>27</td>
                                    </tr>
                                    <tr>
                                        <td>11</td>
                                        <td>With SHANGHAI_CHD_NAME</td>
                                        <td>615</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-12">&nbsp; </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-12">
                            <b>Of the identified metabolities, there is coverage in the following pathway database</b>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-12">
                            <table width="100%" border="1">
                                <tbody>
                                    <tr>
                                        <th width="10%">&nbsp;</th>
                                        <th width="45%">Type</th>
                                        <th width="45%">Number_Metabolities</th>
                                    </tr>
                                    <tr>
                                        <td>1</td>
                                        <td>HMDB</td>
                                        <td>1003</td>
                                    </tr>
                                    <tr>
                                        <td>2</td>
                                        <td>PUBCHEM</td>
                                        <td>987</td>
                                    </tr>
                                    <tr>
                                        <td>3</td>
                                        <td>CHEMSPIDER</td>
                                        <td>60</td>
                                    </tr>
                                    <tr>
                                        <td>4</td>
                                        <td>KEGG(Compound)</td>
                                        <td>562</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-12">&nbsp; </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-12">
                            <b>How many input metabolities map to Refmet?</b>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-12">
                            <table width="100%" border="1">
                                <tbody>
                                    <tr>
                                        <th width="8%">&nbsp;</th>
                                        <th width="22%">Nun_Identified</th>
                                        <th width="22%">Refmet_mapped</th>
                                        <th width="22%">Perc_mapped</th>
                                        <th width="22%">Refmet_unmapped</th>
                                    </tr>
                                    <tr>
                                        <td>1</td>
                                        <td>1704</td>
                                        <td>1058</td>
                                        <td>62.09</td>
                                        <td>2090</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-12">&nbsp; </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-12"><b>Number of Platform a given metabolities appears in? </b> </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-12"><img src="images/qualityControl.jpg" alt="Quality Control"> </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-12">&nbsp; </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-12"><b>Are there duplicate BIOCHEMICAL names with a different_Name </b></div>
                    </div>
                    <div class="row">
                        <div class="col-xs-12">The Refmet_name is not taken into account here </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-12">&nbsp; </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-12"><a href="#">Download list of duplicate BIOCHEMICAL metabolities names</a> </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- end of quality Control Tab -->
    <!-- start harmonization Tab -->
    <div class="tab-pane" id="tab-harmonization">
        <div class="row">
            <div class="col-md-4">
                <div class="well">
                    <div class="well well-nested">
                        <form name="qualityControlForm">
                            <div class="row">
                                <div class="col-xs-12"> &nbsp;</div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12">
                                    <label for="metaboliteFile">Input List of metabolite names one name per line (.txt format)</label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12">
                                    <input id="metaboliteFile" type="file" accept=".txt">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12"> &nbsp;</div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12"> &nbsp;</div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12"> &nbsp;</div>
                            </div>
                        </form>
                    </div>
                </div>
                <!-- end of well -->
            </div>
            <div class="col-md-8">
                <div class="col-xs-12" id="harmonizationDiv" style="display:none;">
                    <div class="row">
                        <div class="col-xs-12"><b>Check how many of the input metabolities are already harmonizaed by the COMETS harmonization group</b></div>
                    </div>
                    <div class="row">
                        <div class="col-xs-8">
                            <table width="80%" border="1">
                                <tbody>
                                    <tr>
                                        <th width="10%">&nbsp;</th>
                                        <th width="45%">Num_Harmonized</th>
                                        <th width="45%">Num_NonHarmonized</th>
                                    </tr>
                                    <tr>
                                        <td>1</td>
                                        <td>0</td>
                                        <td>3</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-12">&nbsp;</div>
                    </div>
                    <div class="row">
                        <div class="col-xs-12"><a href="#">Download list of non-harmonizaed metabolitites and send to COMETS harmonization group</a>
                            <br>
                            <a href="#">Download list of harmonized metabolities</a>
                            <br>
                            <br>
                            <br>
                            <br>
                        </div>
                    </div>
                </div>
            </div>
            <!-- end of right panel -->
        </div>
    </div>
    <!-- end of harmonization Tab -->
    <!-- start correlate Tab -->
    <div class="tab-pane" id="tab-correlate">
        <div class="row">
            <div class="col-md-4">
                <div class="well">
                    <div class="well well-nested">
                        <form name="qualityControlForm">
                            <div class="row">
                                <div class="col-xs-12"> &nbsp;</div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12">
                                    <label for="cohortFile">1. Specify Cohort</label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12">
                                    <select name="cohortSelection" id="cohortSelection" style="width:160px;">
                                        <option value="DPP">DPP</option>
                                        <option value="EPIC">EPIC</option>
                                        <option value="PLCO-CRC">PLCO-CRC</option>
                                        <option value="PLCO-breast">PLCO-breast</option>
                                        <option value="Shanghai">Shanghai</option>
                                        <option value="WHI">WHI</option>
                                        <option value="Other">Other</option>
                                    </select>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12"> &nbsp;</div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12">
                                    <label for="inputDataFile">2. Choose Input Data File</label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12">
                                    <input id="inputDataFile" type="file">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12"> &nbsp;</div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12">
                                    <label for="methodSelection">3. Method for model specification</label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12">
                                    &nbsp;&nbsp;&nbsp;
                                    <input type="radio" name="methodSelection" id="methodSelection1" value="batch" checked=""> &nbsp;Batch
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12">
                                    &nbsp;&nbsp;&nbsp;
                                    <input type="radio" name="methodSelection" id="methodSelection2" value="interactive"> &nbsp;Interactive
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12"> &nbsp;</div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12">
                                    <label for="modelSelection">Choose Model</label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12">
                                    <select name="modelSelection" id="modelSelection" style="width:160px;">
                                        <option value="unadjusted">Unadjusted</option>
                                        <option value="BMI adjusted">BMI adjusted</option>
                                    </select>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12"> &nbsp;</div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12"> &nbsp;</div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12"> &nbsp;</div>
                            </div>
                        </form>
                    </div>
                </div>
                <!-- end of well -->
            </div>
            <div class="col-md-8">
                <div class="row">
                    <div class="col-md-12">
                        <nav class="navbar navbar-default">
                            <!-- Collect the nav links, forms, and other content for toggling -->
                            <div class="collapse navbar-collapse" id="correlate-tab-nav">
                                <ul class="nav nav-pills">
                                    <li class="active"><a href="#tab-summary" data-toggle="tab">Summary</a></li>
                                    <li><a href="#tab-heatmap" data-toggle="tab" id="controlTabId">Heatmap</a></li>
                                    <li><a href="#tab-cluster" data-toggle="tab" id="harmonizationTabId">Cluster and Heatmap</a></li>
                                    <li><a href="#tab-network" data-toggle="tab" id="correlateTabId">Network</a></li>
                                </ul>
                            </div>
                        </nav>
                        <div class="tab-content grey-border">
                            <div class="tab-pane active" id="tab-summary">
                                <div id="summaryDiv" class="col-xs-12" style="display:none;">
                                    <div class="row">
                                        <div class="col-xs-12">
                                            <img src="images/summary.jpg" alt="Summary">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane" id="tab-heatmap">
                                <div id="heatmapDiv" class="col-xs-12" style="display:none;">
                                    <div class="row">
                                        <div class="col-xs-12">
                                            <img src="images/heatmap.jpg" alt="heatmap">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane" id="tab-cluster">
                                <div id="clusterDiv" class="col-xs-12" style="display:none;">
                                    <div class="row">
                                        <div class="col-xs-12">
                                            <img src="images/cluster.jpg" alt="Cluster">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane" id="tab-network">
                                <div id="networkDiv" class="col-xs-12" style="display:none;">
                                    <div class="row">
                                        <div class="col-xs-12">
                                            <img src="images/network.jpg" alt="Network">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- end of row -->
            </div>
            <!-- end of right panel -->
        </div>
    </div>
    <!-- end of correlate Tab -->
    <!-- start help Tab -->
    <div class="tab-pane" id="tab-help">
        <div class="row">
            <div class="col-md-12">
                This web application contains three functions:
                <br>
                <br>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                1. Quality Control Check: internal functionality to check and get some stats from the master harmonized file generated by Adam
                <br>
                <br>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                This application takes in two data files:
            </div>
        </div>
        <div class="row">
            <div class="col-md-2"> &nbsp;</div>
            <div class="col-me-10">
                uids.csv (harmonized file that Adam compiles)
            </div>
        </div>
        <div class="row">
            <div class="col-md-2"> &nbsp;</div>
            <div class="col-me-10">
                Refmet.csv (BIOCHEMICAL names with refmet ids)
                <br>
                <br>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                All files must be in comma-delimited format (.csv). To get a csv file, simply save your Excel sheet as a csv.
                <br>
                <br>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                ##### Mapping to Refmet: Take the BIOCHEMICAL ids from uids.csv, and plug them into this web application:
                <br>
                <br>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                http://www.metabolomicsworkbench.org/data/name_to_refmet_form.php
                <br>
                <br>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                Then copy paste the output into Excel and save as csv.
                <br>
                <br>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                #####Important note: this app requires a column named BIOCHEMICAL
                <br>
                <br>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                2. Harmonization Check: allows consortium members to check whether their list of metabolites has already been integrated and harmonized into the master harmonized file.
                <br>
                <br>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                This application takes in one data file:
                <br>
                <br>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                list of metabolite names with one name per line (.txt format preferred)
                <br>
                <br>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                3. Correlate: A series of models will be run on each cohort in support of the age paper. The analyses will result in metabolites (OUTCOMES) displayed in rows and the covariates (EXPOSURES) along columns. The input data file is assumed to have several sheets:
                <br>
                <ul>
                    <li>Metabolites - from harmonized metabolites output </li>
                    <li>SubjectMetabolites - abundances in columns and subject in rows </li>
                    <li>SubjectData - other exposure and adjustment variables </li>
                    <li>VarMap - maps the variables needed to conduct the cohort specific analysis. Specify the name of variables under CohortVariable column. if the VarReference has the same name in the cohort, leave blank </li>
                    <li>Models - models used to conduct COMETS analysis. Outcomes, exposures and adjustment can specify multiple covariates delimited by spaces (ie: age bmi). </li>
                </ul>
                <br>
                <br>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                3.1 Correlation Heatmap
                <br>
                <br>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                The heatmap displays the proper biochemical names for harmonized metabolites.
                <br>
                <br>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                3.2 Correlation Network
                <br>
                <br>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                Using the genenet package, we display the partial correlation network of your outcomes, exposures and adjusted covariates. There is an option to display the minimum correlation to display with a default of 0.40.
                <br>
                <br>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                3.3 Summary Statistics
                <br>
                <br>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                Shows the distribution of all variables included in your data file.
                <br>
                <br>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                Manuscript 1 Analyses
                <br>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                Please specify your models as:
                <br>
                <br>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6">
                <table border="0" width="80%">
                    <tbody>
                        <tr>
                            <th>Model</th>
                            <th>Covariate</th>
                            <th>Adjustments</th>
                        </tr>
                        <tr>
                            <td>1.1 Unadjusted </td>
                            <td>Age </td>
                            <td>None</td>
                        </tr>
                        <tr>
                            <td>1.2 Race &amp; Sex </td>
                            <td>Adj </td>
                            <td>Age Race &amp; Sex</td>
                        </tr>
                        <tr>
                            <td>1.3 xxxx </td>
                            <td>Age </td>
                            <td>xxxx</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="col-md-6">
                &nbsp;
            </div>
        </div>

    </div>
    <!-- end of help tab content -->
</div>
